<ul id="product_list" class="row grid product-list">
    {foreach $products as $p name=products}
    <li itemscope itemtype ="http://schema.org/Product" class="ajax_block_product col-xs-12 col-sm-6 col-md-4 col-lg-4 {if $smarty.foreach.products.index % 3 == 0}alpha{elseif ($smarty.foreach.products.index+1) % 3 == 0}omega{/if}">
        <div class="inner_content clearfix">
            <a href="{$p.frontend_url}" title="{$p.name}{if $p.summary} &mdash; {strip_tags($p.summary)}{/if}" class="product_img_link">
                <div class="pic-block">
                    {$badge_html = $wa->shop->badgeHtml($p.badge)}
                    {if $badge_html}
                    <div class="corner top right">{$badge_html}</div>
                    {/if}
                    {$wa->shop->productImgHtml($p, '200', ['itemprop' => 'image', 'alt' => $p.name, 'default' => "`$wa_theme_url`img/dummy200.png"])}
                </div>
                {if $p.rating > 0}
                <span class="rating nowrap">{$wa->shop->ratingHtml($p.rating)}</span>
                {/if}
            </a>
            <div class="center_block">
                <div class="label-box">
                </div>
                <div class="product_flags clearfix">
                    <span class="availability title_shop">В наличии</span>				                  
                </div>
                <div class="clear"></div>
                <h5 itemprop="name">
                    <a title="{$p.name}{if $p.summary} &mdash; {strip_tags($p.summary)}{/if}" href="{$p.frontend_url}" class="product_link">{$p.name}</a>
                </h5>


                {if $p.summary}
                <p class="product_desc" itemprop="description">{$p.summary}</p>
                {/if}

            </div>																				 
            <div class="right_block" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
                <span class="price" itemprop="price">{shop_currency_html($p.price)}</span>  

                <p class="compare checkbox choices-thin clearfix hidden-xs">		
                    <input type="checkbox" class="comparator" id="comparator_item_1" value="comparator_item_1"  autocomplete="off"/> 
                    <label for="comparator_item_1">Выбрать для сравнения</label>
                </p>

                <div class="clear noneclass"></div>

                {if $wa->shop->settings('ignore_stock_count') || $p.count === null || $p.count > 0}
                <form class="addtocart" {if $p.sku_count > 1}data-url="{$p.frontend_url}?cart=1"{/if} method="post" action="{$wa->getUrl('/frontendCart/add')}">
                    <input type="hidden" name="product_id" value="{$p.id}">
                    <input type="submit" value="[`Add to cart`]" class="ajax_add_to_cart_button btn btn-default exclusive btn_add_cart">
                    <a title="Подробнее" href="{$p.frontend_url}" class="btn btn-default button">Подробнее</a> 
                </form>
                <link itemprop="availability" href="http://schema.org/InStock" />
                {else}
                <link itemprop="availability" href="http://schema.org/OutOfStock" />
                {/if}  


            </div>
        </div>
    </li>


    {/foreach}
</ul>

{if isset($pages_count) && $pages_count > 1}
<div class="block lazyloading-paging">
    {wa_pagination total=$pages_count attrs=['class' => "menu-h"]}
</div>
{/if}